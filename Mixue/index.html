<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>黑铁蜜雪 - HT Mixue</title>

  <!-- 加载统一 CSS -->
  <link rel="stylesheet" href="css/htgov.css" />

  <!-- Google 翻译 -->
  <script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
</head>
<body>

  <!-- 顶部横幅 -->
  <div id="header"></div>

  <!-- 主体内容区域 -->
  <div class="main-container">
    <!-- 左侧导航栏 -->
    <div id="sidebar"></div>

    <!-- 页面实际内容 -->
    <div class="content">
      <div class="container">
        <h2>HTgovM 页面正文</h2>
        <p>这是你的主内容区域。其余结构保持原样。</p>
      </div>
    </div>
  </div>

  <!-- 注入 header 和 sidebar 后再初始化交互逻辑 -->
  <script>
    function googleTranslateElementInit() {
      new google.translate.TranslateElement({
        pageLanguage: 'zh-CN',
        includedLanguages: 'zh-CN,en,ja,ko,fr,es,de,ru',
        layout: google.translate.TranslateElement.InlineLayout.SIMPLE
      }, 'google_translate_element');
    }

    // 先 fetch，再绑定事件
    Promise.all([
      fetch("HTCD/htgov-header.html").then(r => r.text()).then(t => {
        document.getElementById("header").innerHTML = t;
      }),
      fetch("HTCD/htgov-sidebar.html").then(r => r.text()).then(t => {
        document.getElementById("sidebar").innerHTML = t;
      })
    ]).then(() => {
      // 绑定语言按钮
      const langBtn = document.getElementById("lang-toggle");
      if (langBtn) {
        langBtn.onclick = () => {
          const el = document.getElementById("google_translate_element");
          el.style.display = el.style.display === "none" ? "block" : "none";
        };
      }

      // 绑定头像弹出卡片
      const avatar = document.querySelector(".account-toggle img");
      const popup = document.getElementById("accountPopup");
      if (avatar && popup) {
        avatar.addEventListener("click", () => {
          popup.style.display = popup.style.display === "none" ? "block" : "none";
        });
      }
    });
  </script>

</body>
</html>
